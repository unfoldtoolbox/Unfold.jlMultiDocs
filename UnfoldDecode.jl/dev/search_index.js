var documenterSearchIndex = {"docs":
[{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"EditURL = \"overlapcorrectedLDA_options.jl\"","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"using UnfoldDecode\nusing UnfoldSim\nusing UnfoldMakie\nusing CairoMakie\nusing Unfold","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/#Overlap-corrected-decoding","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap-corrected decoding","text":"","category":"section"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"We will try to introduce as many fancy features as possible Please read the \"tutorial\" first","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/#Simulation","page":"Overlap corrected, multi-event, many options, LDA","title":"Simulation","text":"","category":"section"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"multi-event","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"dat,evt = UnfoldSim.predef_eeg()\nevt.event = rand([\"eventA\",\"eventB\"],size(evt,1)) # add random events\ndat = repeat(dat',5)\ndat .= dat .+ 20 .* rand(size(dat)...)","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/#Overlap-model-Definition","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap-model Definition","text":"","category":"section"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"We have two basis functions now, with two different timewindows. Let's see if it works!","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"des = Dict(\"eventA\" => (@formula(0~1+condition+continuous),firbasis((-0.1,1.),100)),\n           \"eventB\" => (@formula(0~1+continuous),firbasis((-0.3,0.5),100)));\nnothing #hide","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"For the fun of it, we choose a different solver","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"customsolver = (x,y)->Unfold.solver_default(x,y;stderror=true)\nuf = Unfold.fit(UnfoldModel,des,evt,dat[1,:];solver=customsolver);\nplot_erp(coeftable(uf))","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/#Fitting-the-Overlap-corrected-LDA-model","page":"Overlap corrected, multi-event, many options, LDA","title":"Fitting the Overlap-corrected LDA model","text":"","category":"section"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"using MLJ, MultivariateStats, MLJMultivariateStatsInterface\nLDA = @load LDA pkg=MultivariateStats","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"you could use other parameters, check out ?LDA","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"ldaModel = LDA(method=:whiten,cov_w=SimpleCovariance(),cov_b=SimpleCovariance(),regcoef=1e-3)\n\nuf_lda = fit(UnfoldDecodingModel,des,evt,dat,ldaModel,\"eventA\"=>:condition;\n                nfolds=2,# only 2 folds to speed up computation\n                UnfoldFitkwargs=(;solver=customsolver), #customer solver for fun\n                eventcolumn=:event, # actually the default, but maybe your event dataframe has a different name?\n                multithreading = false) # who needs speed anyway :shrug:\nplot_erp(coeftable(uf_lda))","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"Voila, the model classified the correct period at the correct event","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"","category":"page"},{"location":"literate/HowTo/overlapcorrectedLDA_options/","page":"Overlap corrected, multi-event, many options, LDA","title":"Overlap corrected, multi-event, many options, LDA","text":"This page was generated using Literate.jl.","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = UnfoldDecode","category":"page"},{"location":"#UnfoldDecode","page":"Home","title":"UnfoldDecode","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for UnfoldDecode.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This toolbox right now implements:","category":"page"},{"location":"","page":"Home","title":"Home","text":"- Overlapcorrected Decoding ala [Gal Vishne, Leon Deouell et al.](https://doi.org/10.1101/2023.06.28.546397)\n- B2B regression (Jean-Remy King et al. ) - still in Unfold.jl but we should convert soonish :)","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Modules = [UnfoldDecode]","category":"page"},{"location":"#StatsAPI.coeftable-Tuple{UnfoldDecodingModel}","page":"Home","title":"StatsAPI.coeftable","text":"measure: Any measure of MLJ. Find a whole list: MLJ.measures(), by default balancedaccuracy, but rootmean_squared, accuracy etc. all possible.\n\n\n\n\n\n","category":"method"},{"location":"#StatsAPI.fit-Tuple{Any, Dict, Any, AbstractMatrix, MLJModelInterface.Model, Pair}","page":"Home","title":"StatsAPI.fit","text":"using Unfold: @maybe_threads Use UnfoldLinearModelContinuous time to remove all overlap from an event. Use the model classifier to predict the EEG data. Everything runs cross-validated with nfolds\n\nmodel: By default LDA(), but could be any MLJ machine with specified parameters\ntarget: String or Symbol with the tbl[:,column] to be decoded\nUnfoldFitkwargs: optional Named Tuple as kwargs to provide to the initial \"overlap-cleaning\" modelfit, e.g. UnfoldFitkwargs = (;solver=(x,y)->solver_krylov(x,y,GPU=true)) for GPU fit (need to load Krylov and CUDA before)\n\n\n\n\n\n","category":"method"},{"location":"#UnfoldDecode.fit_timepoints-Tuple{Any, Any, Any}","page":"Home","title":"UnfoldDecode.fit_timepoints","text":"For each time-point, fit a MLJ-Machine\n\n\n\n\n\n","category":"method"},{"location":"#UnfoldDecode.singletrials-Tuple{Any, Unfold.UnfoldLinearModelContinuousTime, DataFrames.DataFrame, Any, Any}","page":"Home","title":"UnfoldDecode.singletrials","text":"Returns the single trial corrected (and \"epoched\") trials from the basis target\n\n\n\n\n\n","category":"method"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"EditURL = \"overlapcorrectedLDA.jl\"","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"using UnfoldDecode\nusing UnfoldSim\nusing UnfoldMakie\nusing CairoMakie\nusing Unfold","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/#Overlap-corrected-decoding","page":"Overlap corrected LDA","title":"Overlap-corrected decoding","text":"","category":"section"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"This approach follows the work of the Deoulle Group, especially Gal Vishne's work as published 2023: https://doi.org/10.1101/2023.06.28.546397","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/#Simulation","page":"Overlap corrected LDA","title":"Simulation","text":"","category":"section"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"We start with simulating some continuous, overlapping data with two conditions. As of now, UnfoldSim doesnt support multichannel, so we simply repeat the channel and add some noise`","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"dat,evt = UnfoldSim.predef_eeg()\ndat = repeat(dat',5)\ndat .= dat .+ 20 .* rand(size(dat)...)","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/#Overlap-model-Definition","page":"Overlap corrected LDA","title":"Overlap-model Definition","text":"","category":"section"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"We have to define what model we want to use for overlap correction We decide for a one-basisfunction model, with one covariate, from -0.1 to 0.5 seconds afte the stimulus onset. Sampling rate 100 as in the simulation","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"des = Dict(Any => (@formula(0~1+condition+continuous),firbasis((-0.1,1.),100)));\nnothing #hide","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"Fitting and visualizing a single channel of the model","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"uf = Unfold.fit(UnfoldModel,des,evt,dat[1,:]);\nplot_erp(coeftable(uf))","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/#Fitting-the-Overlap-corrected-LDA-model","page":"Overlap corrected LDA","title":"Fitting the Overlap-corrected LDA model","text":"","category":"section"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"Following the MLJ Modelzoo we have to do the following to load an LDA model","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"using MLJ, MultivariateStats, MLJMultivariateStatsInterface\nLDA = @load LDA pkg=MultivariateStats\nuf_lda = fit(UnfoldDecodingModel,des,evt,dat,LDA(),Any=>:condition;nfolds=2) # 2 folds to speed up computation\nplot_erp(coeftable(uf_lda))","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"Voila, the model classified the correct period.","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"","category":"page"},{"location":"literate/tutorials/overlapcorrectedLDA/","page":"Overlap corrected LDA","title":"Overlap corrected LDA","text":"This page was generated using Literate.jl.","category":"page"}]
}
